# OpenClaw Feishu ä¸­å¤®æƒé™ç‰ˆ ğŸ¤–

åŸºäº [clawdbot-feishu](https://github.com/m1heng/clawdbot-feishu) ä¼˜åŒ–çš„é£ä¹¦æ’ä»¶ï¼Œå¢åŠ äº†**ä¸­å¤®æƒé™ç®¡ç†**å’Œ**ä¸»æ§ç›‘æ§**åŠŸèƒ½ã€‚

é€‚åˆéœ€è¦**å¤šç”¨æˆ·æƒé™ç®¡æ§**ã€**ä»»åŠ¡æ±‡æŠ¥**ã€**æ•æ„Ÿæ“ä½œå®¡æ‰¹**çš„ä¼ä¸šåœºæ™¯ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. å››å±‚æƒé™ä½“ç³» (L1/L2/L3/L0)

| å±‚çº§ | è§’è‰² | æƒé™èŒƒå›´ |
|:----:|:----:|:---------|
| **L1** | å¤§A | å…¨å±€ç®¡ç†ã€æ‰€æœ‰æ“ä½œã€è§„åˆ™ä¿®æ”¹ |
| **L2** | éƒ¨é—¨è´Ÿè´£äºº | æœ¬éƒ¨é—¨è§„åˆ™ä¿®æ”¹ã€å®¡æ‰¹L3ä»»åŠ¡ |
| **L3** | éƒ¨é—¨å‘˜å·¥ | æŸ¥è¯¢ã€æäº¤ä»»åŠ¡ã€æœ¬éƒ¨é—¨æ–‡ä»¶è¯»å– |
| **L0** | æœªæˆæƒ | ä»…æŸ¥è¯¢ï¼Œä»»ä½•æ“ä½œéœ€L1ç¡®è®¤ |

### 2. åŠ¨æ€Agent + ä¸»æ§ç›‘æ§

```
é£ä¹¦ç”¨æˆ· (Bella/L3)
    â”‚
    â–¼
é£ä¹¦æ’ä»¶è·¯ç”±
    â”‚
    â”œâ”€â”€â†’ ç‹¬ç«‹Agent (æ—¥å¸¸ä»»åŠ¡)
    â”‚      â””â”€â”€ æƒé™å—é™
    â”‚      â””â”€â”€ å®Œæˆåæ±‡æŠ¥ä¸»æ§
    â”‚
    â””â”€â”€â†’ ä¸»æ§Agent (æ•æ„Ÿæ“ä½œ)
           â””â”€â”€ å®¡æ‰¹æƒé™è¯·æ±‚
           â””â”€â”€ ç»Ÿä¸€å‘ç¾¤æ±‡æŠ¥
```

### 3. èº«ä»½è‡ªåŠ¨è¯†åˆ«

- **å·²ç™»è®°ç”¨æˆ·**ï¼šè‡ªåŠ¨è¯†åˆ«ï¼Œç«‹å³å“åº”
- **IDå˜æ›´**ï¼šåŒä¸€äººæ¢è´¦å·ï¼Œè‡ªåŠ¨ç»§æ‰¿æƒé™
- **æ–°äººç™»è®°**ï¼šå‘é€ã€Œæˆ‘æ˜¯XXXã€ï¼Œæäº¤å¤§Aç¡®è®¤
- **å†’å……æ£€æµ‹**ï¼šå£°ç§°ä»–äººèº«ä»½ï¼Œæ ‡è®°å¯ç–‘

### 4. ä»»åŠ¡æ±‡æŠ¥é“å¾‹

| ä»»åŠ¡æ¥æº | æ±‡æŠ¥æ–¹å¼ |
|:---------|:---------|
| **L1ï¼ˆå¤§Aï¼‰** | ä¸è¾“å‡ºåˆ°ç¾¤ |
| **L2/L3/L0** | å®Œæˆåå¿…é¡»å‘ç¾¤æ±‡æŠ¥ |

**æ±‡æŠ¥æ ¼å¼ï¼ˆä¸‰è¡Œï¼‰ï¼š**
```
âœ…[å§“å] [æˆåŠŸ]
ğŸ“ ä»»åŠ¡ç®€è¿°
ğŸ“ è¾“å‡ºæ–‡ä»¶:æ–‡ä»¶è·¯å¾„æˆ–æ— 
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶

```bash
# ä»npmå®‰è£…ï¼ˆæ¨èï¼‰
openclaw plugins install @Annmys/openclaw-feishu

# æˆ–ä»GitHubå®‰è£…
openclaw plugins install https://github.com/Annmys/openclaw-feishu.git
```

### 2. é…ç½®èº«ä»½æ˜ å°„è¡¨

åœ¨å·¥ä½œç©ºé—´åˆ›å»º `rules/feishu-identity.yaml`ï¼š

```yaml
verified_users:
  # å¤§A - æœ€é«˜æƒé™
  ou_xxxxxxxxxxxxxxxx:
    name: "å¤§A"
    level: "L1"
    department: "å…¨å±€"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"
    
  # Bella - é‡‡è´­éƒ¨é—¨è´Ÿè´£äºº
  ou_yyyyyyyyyyyyyyyy:
    name: "Bella"
    level: "L2"
    department: "é‡‡è´­"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"
    
  # aa1 - é‡‡è´­éƒ¨é—¨å‘˜å·¥
  ou_zzzzzzzzzzzzzzzz:
    name: "aa1"
    level: "L3"
    department: "é‡‡è´­"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"

channels:
  feishu_groups:
    oc_report_group_id:
      name: "ä»»åŠ¡æ±‡æŠ¥ç¾¤"
      type: "group"
```

### 3. é…ç½®æ’ä»¶

```bash
openclaw config set channels.feishu.appId "cli_xxxxx"
openclaw config set channels.feishu.appSecret "your_secret"
openclaw config set channels.feishu.enabled true

# å¯ç”¨åŠ¨æ€Agentåˆ›å»º
openclaw config set channels.feishu.dynamicAgentCreation.enabled true
openclaw config set channels.feishu.dynamicAgentCreation.workspaceTemplate "~/workspaces/feishu-{agentId}"

# é…ç½®ä¸»æ§ä¼šè¯Key
openclaw config set channels.feishu.centralAuth.masterSessionKey "agent:main:main"
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### ä¸­å¤®æƒé™é…ç½®

```yaml
channels:
  feishu:
    enabled: true
    appId: "cli_xxxxx"
    appSecret: "secret"
    
    # æƒé™ç­–ç•¥
    dmPolicy: "allowlist"           # ç§èŠç™½åå•
    groupPolicy: "allowlist"        # ç¾¤èŠç™½åå•
    requireMention: true            # ç¾¤èŠéœ€@æœºå™¨äºº
    
    # åŠ¨æ€Agentåˆ›å»º
    dynamicAgentCreation:
      enabled: true
      workspaceTemplate: "~/workspaces/feishu-{agentId}"
      agentDirTemplate: "~/.openclaw/agents/{agentId}/agent"
      maxAgents: 100
    
    # ä¸­å¤®æƒé™é…ç½®
    centralAuth:
      # ä¸»æ§ä¼šè¯Key
      masterSessionKey: "agent:main:main"
      # èº«ä»½æ˜ å°„è¡¨è·¯å¾„ï¼ˆé»˜è®¤ï¼š~/.openclaw/workspace/rules/feishu-identity.yamlï¼‰
      identityMapPath: ""
      # æ±‡æŠ¥ç¾¤ID
      reportGroupId: "oc_xxxxxxxxxx"
      # æ˜¯å¦å¯ç”¨è‡ªåŠ¨èº«ä»½ç¡®è®¤
      enableAutoConfirm: true
```

### ä¼šè¯éš”ç¦»é…ç½®

```yaml
session:
  # ç§èŠä¼šè¯éš”ç¦»
  dmScope: "per-peer"
```

---

## ğŸ›¡ï¸ æƒé™çŸ©é˜µ

| æ“ä½œç±»å‹ | L1 | L2 | L3 | L0 |
|:---------|:--:|:--:|:--:|:--:|
| æŸ¥è¯¢/æœç´¢ | âœ… | âœ… | âœ… | âœ… |
| è¯»å–æ–‡ä»¶ | âœ… | âœ… | æœ¬éƒ¨é—¨âœ… | âŒ |
| ä¿®æ”¹æ–‡ä»¶ | âœ… | æœ¬éƒ¨é—¨âœ… | âŒ | âŒ |
| Gitæ“ä½œ | âœ… | âŒ | âŒ | âŒ |
| Dockeræ“ä½œ | âœ… | âŒ | âŒ | âŒ |
| ç³»ç»Ÿå‘½ä»¤ | âœ… | âŒ | âŒ | âŒ |
| å‘é€æ¶ˆæ¯ | âœ… | éœ€ç¡®è®¤ | âŒ | âŒ |
| ä¿®æ”¹è§„åˆ™ | âœ… | æœ¬éƒ¨é—¨âœ… | âŒ | âŒ |

---

## ğŸ”„ å·¥ä½œæµç¨‹

### æ–°äººå…¥ç¾¤æµç¨‹

```
æ–°å‘˜å·¥ç§èŠæœºå™¨äºº
    â”‚
    â–¼
å‘é€ã€Œæˆ‘æ˜¯XXXã€
    â”‚
    â–¼
æ£€æŸ¥èº«ä»½æ˜ å°„è¡¨
    â”‚
    â”œâ”€â”€ åå­—å·²å­˜åœ¨ï¼ˆéL1ï¼‰â”€â”€â†’ âœ… è‡ªåŠ¨ç¡®è®¤ï¼Œç»§æ‰¿æƒé™
    â”‚
    â”œâ”€â”€ å…¨æ–°äºº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ğŸ“ æäº¤ä¸»æ§ï¼Œç­‰å¾…å¤§Aç¡®è®¤
    â”‚
    â””â”€â”€ å£°ç§°æ˜¯L1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ğŸš« æ ‡è®°å¯ç–‘ï¼Œäººå·¥å®¡æ ¸
```

### æ•æ„Ÿæ“ä½œæµç¨‹

```
L3ç”¨æˆ·è¯·æ±‚æ•æ„Ÿæ“ä½œï¼ˆå¦‚Gitï¼‰
    â”‚
    â–¼
æƒé™æ£€æŸ¥ â”€â”€â†’ æƒé™ä¸è¶³
    â”‚
    â–¼
å›å¤ï¼šã€Œæ­¤æ“ä½œéœ€è¦æœ€é«˜æƒé™ï¼Œå·²ä¸ºæ‚¨æäº¤åˆ°å¤§Aç¡®è®¤ã€
    â”‚
    â–¼
è½¬å‘åˆ°ä¸»æ§Agent
    â”‚
    â–¼
å¤§Aå®¡æ‰¹ â”€â”€â†’ æˆæƒ/æ‹’ç»
    â”‚
    â–¼
è¿”å›ç»“æœç»™ç”¨æˆ·
```

### ä»»åŠ¡æ±‡æŠ¥æµç¨‹

```
Bellaå®Œæˆä»»åŠ¡
    â”‚
    â–¼
ç‹¬ç«‹Agentå¤„ç†
    â”‚
    â–¼
å‘é€ sessions_send åˆ°ä¸»æ§
    â”‚
    â–¼
ä¸»æ§Agentæ¥æ”¶æ±‡æŠ¥
    â”‚
    â–¼
å‘é€åˆ°æ±‡æŠ¥ç¾¤ï¼ˆä¸‰è¡Œæ ¼å¼ï¼‰
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
openclaw-feishu/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ channel.ts          # é£ä¹¦é€šé“ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ dynamic-agent.ts    # åŠ¨æ€Agentåˆ›å»º
â”‚   â”œâ”€â”€ central-auth.ts     # ä¸­å¤®æƒé™ç®¡ç†å™¨ â­
â”‚   â”œâ”€â”€ identity.ts         # èº«ä»½éªŒè¯æ¨¡å— â­
â”‚   â”œâ”€â”€ gatekeeper.ts       # æƒé™æ£€æŸ¥æ¨¡å— â­
â”‚   â”œâ”€â”€ reporter.ts         # ä»»åŠ¡æ±‡æŠ¥æ¨¡å— â­
â”‚   â”œâ”€â”€ bot.ts              # é£ä¹¦Botå°è£…
â”‚   â”œâ”€â”€ runtime.ts          # è¿è¡Œæ—¶å·¥å…·
â”‚   â””â”€â”€ ...                 # å…¶ä»–å·¥å…·æ¨¡å—
â”œâ”€â”€ skills/                 # é£ä¹¦ç›¸å…³æŠ€èƒ½
â”œâ”€â”€ index.ts                # æ’ä»¶å…¥å£
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸ†š ä¸åŸç‰ˆçš„åŒºåˆ«

| ç‰¹æ€§ | åŸç‰ˆ | ä¸­å¤®æƒé™ç‰ˆ |
|:-----|:----:|:----------:|
| åŠ¨æ€Agentåˆ›å»º | âœ… | âœ… |
| èº«ä»½éªŒè¯ | âŒ | âœ… |
| æƒé™çŸ©é˜µ | âŒ | âœ… |
| æ•æ„Ÿæ“ä½œå®¡æ‰¹ | âŒ | âœ… |
| ä»»åŠ¡æ±‡æŠ¥ | âŒ | âœ… |
| ä¸»æ§ç›‘æ§ | âŒ | âœ… |
| è‡ªåŠ¨èº«ä»½ç¡®è®¤ | âŒ | âœ… |

---

## ğŸ”§ åŸé¡¹ç›®åŠŸèƒ½

æœ¬æ’ä»¶å®Œæ•´ä¿ç•™åŸé¡¹ç›®çš„æ‰€æœ‰åŠŸèƒ½ï¼š

- âœ… WebSocket/Webhook è¿æ¥æ¨¡å¼
- âœ… ç§èŠå’Œç¾¤èŠ
- âœ… æ¶ˆæ¯å›å¤å’Œå¼•ç”¨ä¸Šä¸‹æ–‡
- âœ… å…¥ç«™åª’ä½“æ”¯æŒï¼ˆå›¾ç‰‡ã€æ–‡ä»¶ï¼‰
- âœ… æ–‡æ¡£å·¥å…·ï¼ˆfeishu_docï¼‰
- âœ… çŸ¥è¯†åº“å·¥å…·ï¼ˆfeishu_wikiï¼‰
- âœ… äº‘ç©ºé—´å·¥å…·ï¼ˆfeishu_driveï¼‰
- âœ… å¤šç»´è¡¨æ ¼å·¥å…·ï¼ˆfeishu_bitableï¼‰
- âœ… @è½¬å‘åŠŸèƒ½
- âœ… æƒé™é”™è¯¯æç¤º

è¯¦è§åŸé¡¹ç›®æ–‡æ¡£ï¼š[clawdbot-feishu](https://github.com/m1heng/clawdbot-feishu)

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### èº«ä»½ç™»è®°

```
ã€ç”¨æˆ·ã€‘æˆ‘æ˜¯å°æ
ã€æœºå™¨äººã€‘æ‚¨å¥½ï¼æˆ‘æ˜¯å°A ğŸ¤–

æ‚¨çš„èº«ä»½å°šæœªç™»è®°ï¼Œè¯·ç­‰å¾…å¤§Aç¡®è®¤åä½¿ç”¨ã€‚

å¦‚ urgentï¼Œè¯·ç›´æ¥è”ç³»å¤§Aã€‚

[åŒæ—¶è½¬å‘åˆ°ä¸»æ§]
```

### æ•æ„Ÿæ“ä½œ

```
ã€Bellaã€‘å¸®æˆ‘git pushä¸€ä¸‹
ã€æœºå™¨äººã€‘æ­¤æ“ä½œéœ€è¦æœ€é«˜æƒé™ï¼Œå·²ä¸ºæ‚¨æäº¤åˆ°å¤§Aç¡®è®¤ï¼Œè¯·ç¨å€™...

[è½¬å‘åˆ°ä¸»æ§]
ğŸš¨ æƒé™è¯·æ±‚
æ¥æº: é£ä¹¦ç§èŠ
è¯·æ±‚äºº: Bella (L2)
è¯¦æƒ…: è¯·æ±‚æ“ä½œ: git

[âœ… æˆæƒæ‰§è¡Œ] [âŒ æ‹’ç»]
```

### ä»»åŠ¡æ±‡æŠ¥

```
ã€ç¾¤æ¶ˆæ¯ã€‘
âœ…[aa1] [æˆåŠŸ]
ğŸ“ æ•´ç†é‡‡è´­è®¢å•
ğŸ“ è¾“å‡ºæ–‡ä»¶:/data/gongxiang/aa1/è®¢å•.xlsx
```

---

## ğŸ¤ æ„Ÿè°¢

- åŸºäº [m1heng/clawdbot-feishu](https://github.com/m1heng/clawdbot-feishu) å¼€å‘
- éµå¾ª MIT è®¸å¯è¯

---

*ç»´æŠ¤è€…ï¼šå°A ğŸ¤–*  
*ç‰ˆæœ¬ï¼š0.2.0*
