# OpenClaw é£ä¹¦æ’ä»¶ - é¡¹ç›®è¿›åº¦æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°ï¼š** @Annmys/openclaw-feishu
**ç‰ˆæœ¬ï¼š** 0.2.0
**ä»“åº“åœ°å€ï¼š** https://github.com/Annmys/openclaw-feishu
**æœ¬åœ°è·¯å¾„ï¼š** E:\CODE2\openclaw-feishu

**é¡¹ç›®å®šä½ï¼š** åŸºäº [clawdbot-feishu](https://github.com/m1heng/clawdbot-feishu) ä¼˜åŒ–çš„é£ä¹¦æ’ä»¶ï¼Œå¢åŠ **ä¸­å¤®æƒé™ç®¡ç†**å’Œ**ä¸»æ§ç›‘æ§**åŠŸèƒ½ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | çŠ¶æ€ | æè¿° |
|------|------|:----:|------|
| é€šé“ä¸»é€»è¾‘ | `src/channel.ts` | âœ… | é£ä¹¦æ¶ˆæ¯è·¯ç”±ä¸å¤„ç† |
| åŠ¨æ€Agent | `src/dynamic-agent.ts` | âœ… | ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºç‹¬ç«‹Agent |
| ä¸­å¤®æƒé™ç®¡ç† | `src/central-auth.ts` | âœ… | æ•´åˆèº«ä»½éªŒè¯ã€æƒé™æ£€æŸ¥ã€ä»»åŠ¡æ±‡æŠ¥ |
| èº«ä»½éªŒè¯ | `src/identity.ts` | âœ… | ç”¨æˆ·èº«ä»½è¯†åˆ«ä¸æ˜ å°„ |
| æƒé™æ£€æŸ¥ | `src/gatekeeper.ts` | âœ… | å››å±‚æƒé™çŸ©é˜µ(L1/L2/L3/L0) |
| ä»»åŠ¡æ±‡æŠ¥ | `src/reporter.ts` | âœ… | ä»»åŠ¡å®Œæˆæ±‡æŠ¥æ ¼å¼ä¸å‘é€ |
| é£ä¹¦Bot | `src/bot.ts` | âœ… | é£ä¹¦APIå°è£… |
| è¿è¡Œæ—¶å·¥å…· | `src/runtime.ts` | âœ… | æ’ä»¶è¿è¡Œæ—¶å·¥å…·å‡½æ•° |

### é£ä¹¦å·¥å…·æ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | çŠ¶æ€ | æè¿° |
|------|------|:----:|------|
| æ–‡æ¡£å·¥å…· | `src/docx.ts` | âœ… | é£ä¹¦æ–‡æ¡£æ“ä½œ |
| çŸ¥è¯†åº“å·¥å…· | `src/wiki.ts` | âœ… | é£ä¹¦çŸ¥è¯†åº“æ“ä½œ |
| äº‘ç©ºé—´å·¥å…· | `src/drive.ts` | âœ… | é£ä¹¦äº‘ç©ºé—´æ“ä½œ |
| å¤šç»´è¡¨æ ¼ | `src/bitable.ts` | âœ… | é£ä¹¦å¤šç»´è¡¨æ ¼æ“ä½œ |
| æƒé™ç®¡ç† | `src/perm.ts` | âœ… | é£ä¹¦æƒé™ç®¡ç† |

---

## ğŸ“Š å¼€å‘è¿›åº¦

### âœ… å·²å®Œæˆæ¨¡å—

- [x] åŸºç¡€é£ä¹¦é€šé“åŠŸèƒ½ï¼ˆæ¶ˆæ¯æ”¶å‘ã€ç¾¤èŠã€ç§èŠï¼‰
- [x] åŠ¨æ€Agentåˆ›å»ºä¸ç®¡ç†
- [x] å››å±‚æƒé™ä½“ç³»ï¼ˆL1/L2/L3/L0ï¼‰
- [x] èº«ä»½éªŒè¯ä¸æ˜ å°„è¡¨
- [x] æƒé™æ£€æŸ¥ä¸æ•æ„Ÿæ“ä½œæ‹¦æˆª
- [x] ä»»åŠ¡æ±‡æŠ¥æ ¼å¼è®¾è®¡
- [x] é£ä¹¦æ–‡æ¡£/çŸ¥è¯†åº“/äº‘ç©ºé—´/å¤šç»´è¡¨æ ¼å·¥å…·
- [x] æ™ºèƒ½ç”¨æˆ·è¯†åˆ«ï¼ˆé£ä¹¦APIè·å–å§“åï¼‰
- [x] å…¥ç¾¤å¼•å¯¼æµç¨‹
- [x] æƒé™é”™è¯¯æç¤º

### ğŸš§ å¾…å®Œæˆ/å¾…ä¼˜åŒ–æ¨¡å—

- [x] **ä¸»æ§è½¬å‘å®ç°** - âœ… å·²å®Œæˆï¼ä½¿ç”¨ sessions-bridge æ¨¡å—å‘é€æ¶ˆæ¯åˆ°ä¸»æ§
- [x] **ä»»åŠ¡æ±‡æŠ¥å‘é€** - âœ… å·²å®Œæˆï¼`reportToGroup` æ–¹æ³•å·²æ¥å…¥é£ä¹¦API
- [x] **ä¸»æ§æ±‡æŠ¥æ¥æ”¶** - âœ… å·²å®Œæˆï¼ä¸»æ§Agenté€šè¿‡ sessions_send æ¥æ”¶æ±‡æŠ¥
- [x] **æƒé™å®¡æ‰¹æµç¨‹** - âœ… å·²å®Œæˆï¼æ”¯æŒ `handlePermissionApproval` æ–¹æ³•å¤„ç†å®¡æ‰¹
- [ ] **è´ªåƒè›‡Action** - é…ç½® GitHub Action ç”Ÿæˆè´ªåƒè›‡è´¡çŒ®å›¾
- [ ] **èº«ä»½è¡¨çƒ­æ›´æ–°** - ä¿®æ”¹ `feishu-identity.yaml` åè‡ªåŠ¨é‡æ–°åŠ è½½
- [ ] **éƒ¨é—¨èµ„æºåˆ¤æ–­** - å®ç°æœ¬éƒ¨é—¨æ–‡ä»¶è¯»å–æƒé™
- [ ] **ç¼“å­˜ä¼˜åŒ–** - ç”¨æˆ·å§“å10åˆ†é’Ÿç¼“å­˜æœºåˆ¶ä¼˜åŒ–

### ğŸ“‹ å¾…æµ‹è¯•é¡¹

- [ ] æ–°äººå…¥ç¾¤æµç¨‹å®Œæ•´æµ‹è¯•
- [ ] æ•æ„Ÿæ“ä½œå®¡æ‰¹æµç¨‹æµ‹è¯•
- [ ] ä»»åŠ¡æ±‡æŠ¥æµç¨‹æµ‹è¯•
- [ ] L2/L3/L0æƒé™è¾¹ç•Œæµ‹è¯•
- [ ] ç¾¤èŠæ•æ„Ÿæ“ä½œæ‹¦æˆªæµ‹è¯•
- [ ] é£ä¹¦APIè·å–ç”¨æˆ·å§“ååŠŸèƒ½æµ‹è¯•

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### èº«ä»½æ˜ å°„è¡¨æ¨¡æ¿

ä½ç½®ï¼š`~/.openclaw/workspace/rules/feishu-identity.yaml`

```yaml
verified_users:
  ou_xxxxxxxxxxxxxxxx:
    name: "å¤§A"
    level: "L1"
    department: "å…¨å±€"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"
    
  ou_yyyyyyyyyyyyyyyy:
    name: "Bella"
    level: "L2"
    department: "é‡‡è´­"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"
    
  ou_zzzzzzzzzzzzzzzz:
    name: "aa1"
    level: "L3"
    department: "é‡‡è´­"
    verified_at: "2025-02-05T19:00:00+08:00"
    status: "active"

channels:
  feishu_groups:
    oc_report_group_id:
      name: "ä»»åŠ¡æ±‡æŠ¥ç¾¤"
      type: "group"
```

### OpenClaw é…ç½®

```bash
# é£ä¹¦åº”ç”¨é…ç½®
openclaw config set channels.feishu.appId "cli_xxxxx"
openclaw config set channels.feishu.appSecret "your_secret"
openclaw config set channels.feishu.enabled true

# å¯ç”¨åŠ¨æ€Agentåˆ›å»º
openclaw config set channels.feishu.dynamicAgentCreation.enabled true
openclaw config set channels.feishu.dynamicAgentCreation.workspaceTemplate "~/workspaces/feishu-{agentId}"

# ä¸­å¤®æƒé™é…ç½®
openclaw config set channels.feishu.centralAuth.masterSessionKey "agent:main:main"
openclaw config set channels.feishu.centralAuth.reportGroupId "oc_xxxxxxxxxx"
openclaw config set channels.feishu.centralAuth.enableAutoConfirm true
```

---

## ğŸ“ ä¿®æ”¹è®°å½•

### 2026-02-06
- âœ… å¯¼å‡ºé¡¹ç›®åˆ° E:\CODE2\openclaw-feishu
- âœ… åˆ›å»ºé¡¹ç›®è¿›åº¦æ–‡æ¡£
- âœ… **ç¼–è¯‘é¡¹ç›®** - ç”Ÿæˆ dist ç›®å½•
- âœ… **åˆ›å»ºå‘å¸ƒåŒ…** - openclaw-feishu-v0.2.0.zip
- âœ… **åˆ›å»ºå®‰è£…è„šæœ¬** - install.bat / install.ps1
- âœ… **å®ç°ä¸»æ§è½¬å‘** - å®Œæˆ `forwardToMaster` æ–¹æ³•ï¼Œæ”¯æŒè½¬å‘æƒé™è¯·æ±‚åˆ°ä¸»æ§
- âœ… **å®ç°ä»»åŠ¡æ±‡æŠ¥** - å®Œæˆ `reportToGroup` æ–¹æ³•ï¼Œæ”¯æŒå‘é€ä»»åŠ¡æ±‡æŠ¥åˆ°ç¾¤ç»„
- âœ… **å®ç°æƒé™å®¡æ‰¹** - å®Œæˆ `handlePermissionApproval` æ–¹æ³•ï¼Œæ”¯æŒL1å®¡æ‰¹æƒé™è¯·æ±‚
- âœ… **é›†æˆä¸­å¤®æƒé™æ£€æŸ¥** - åœ¨ `bot.ts` ä¸­é›†æˆæƒé™æ£€æŸ¥æµç¨‹
- âœ… **åˆ›å»ºä¼šè¯æ¡¥æ¥æ¨¡å—** - `sessions-bridge.ts` æä¾› `sessions_send` åŠŸèƒ½

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. âœ… **æ¥å…¥ sessions_send API** - å·²å®ç°ä¸»æ§è½¬å‘åŠŸèƒ½
2. âœ… **é…ç½®æ±‡æŠ¥ç¾¤å‘é€** - å·²å®ç° reportToGroup æ–¹æ³•
3. âœ… **å®Œå–„æƒé™å®¡æ‰¹** - å·²å®ç° L1 æˆæƒ/æ‹’ç»æƒé™è¯·æ±‚
4. **æµ‹è¯•å®Œæ•´æµç¨‹** - æ–°äººå…¥ç¾¤ã€æ•æ„Ÿæ“ä½œã€ä»»åŠ¡æ±‡æŠ¥
5. **æ–‡æ¡£å®Œå–„** - è¡¥å……APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
6. **æ¨é€æ›´æ–°åˆ°GitHub** - å°†å®Œæˆçš„åŠŸèƒ½æ¨é€åˆ°è¿œç¨‹ä»“åº“

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- åŸé¡¹ç›®ï¼šhttps://github.com/m1heng/clawdbot-feishu
- OpenClaw æ’ä»¶å¼€å‘æ–‡æ¡£ï¼šhttps://docs.openclaw.ai/
- é£ä¹¦å¼€æ”¾å¹³å°ï¼šhttps://open.feishu.cn/

---

*æ–‡æ¡£æ›´æ–°æ—¶é—´ï¼š2026-02-06*  
*ç»´æŠ¤è€…ï¼šå°A ğŸ¤–*
